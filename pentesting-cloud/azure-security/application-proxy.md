# Application Proxy



Allows users to access on-prem web apps after having signed-in into Azure AD.\
An application proxy has:

* An endpoint (URL) to access the webapp
  * This URL forwards users requests to the application proxy server
* An application proxy server: it passes the token provided by azure ad to the on-prem connector
  * It leaves the request in a queue until the connector gets it
* Application Proxy Connector: An agent that runs on the on-prem infra and is a communication agent between the cloud proxy service and the on-prem application. It also communicates with the on-prem AD in case of SSO
  * The connect gets the request from the application proxy and forwards it to the application
* On-prem application - The application that is exposed using application proxy



```powershell
# Enumerate applications with application proxy configured 
Get-AzureADApplication | %{try{Get-AzureADApplicationProxyApplication -ObjectId $_.ObjectID;$_.DisplayName;$_.ObjectID}catch{}}

# Get applications service principal
Get-AzureADServicePrincipal -All $true | ?{$_.DisplayName -eq "Name"}

# Use the following ps1 script from https://learn.microsoft.com/en-us/azure/active-directory/app-proxy/scripts/powershell-display-users-group-of-app
# to find users and groups assigned to the application. Pass the ObjectID of the Service Principal to it
Get-ApplicationProxyAssignedUsersAndGroups -ObjectId <object-id>
```
